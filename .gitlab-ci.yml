image: node:22
pages:
  stage: deploy
  script:
    - npm install
    - npm run build
    # 先清空public目录（若存在），再创建并移动文件
    - rm -rf public/*  # 清空public下的所有内容（避免目录冲突）
    - mkdir -p public  # 确保public目录存在
    - mv dist/* public/  # 移动构建产物
  artifacts:
    paths:
      - public
  rules:
    - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH